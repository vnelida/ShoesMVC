@model ShoeHomeDetailsVm
@using X.PagedList
@using X.PagedList.Mvc.Core

<div class="bg-light border p-3 shadow">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h4>@Model.Model</h4>
        <div>
            <a href="@(ViewBag.ReturnUrl??Url.Action("Index","Shoes"))" class="btn btn-danger me-3">
                <i class="bi bi-backspace"></i> Back to List
            </a>
            <a href="#" onclick="openAddSizeModal(@Model.ShoeId,@ViewBag.ReturnUrl)" class="btn btn-primary">
                <i class="bi bi-plus-circle"></i> Add Size
            </a>
        </div>
    </div>

    <hr />
    <table class="table table-bordered table-hover mt-3">
        <thead>
            <tr>
                <th>Aviable Size</th>
                <th>Stock</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.ShoeSize.Any())
            {
                foreach (var item in Model.ShoeSize)
                {
                    <tr>
                        <td>@item.SizeN.SizeNumber</td>
                        <td>@item.QuantityInStock</td>
                        <td>
                            <a class="btn btn-warning" asp-action="UpSert" asp-route-id="@item.ShoeSizeId">
                                <i class="bi bi-pencil-square"></i> Edit
                            </a>
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="3" class="text-center">No sizes assigned yet.</td>
                </tr>
            }
        </tbody>
    </table>
    
</div>
<div class="modal fade" id="shoeSizeModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-md modal-dialog-centered">
        <div class="modal-content">
            @* upsert *@
        </div>
    </div>
</div>
<script>
    function openAddSizeModal(shoeId,returnUrl) {
        console.log(returnUrl)
        debugger;
        $.ajax({
            url: '@Url.Action("UpsertShoeSize", "Shoes")',
            type: 'GET',
            data: { shoeId: shoeId, returnUrl:returnUrl },
            success: function (data) {
                $('#shoeSizeModal .modal-content').html(data);
                $('#shoeSizeModal').modal('show');
            },
            error: function () {
                alert('Error al cargar el formulario para agregar talla.');
            }
        });
    }
</script>




